<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="utf-8">
  <title>SPLAT Business Dashboard</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <script type="module">
    const API = 'https://ramplayer-core-2025-production-c338.up.railway.app';
    import { createRoot } from 'https://esm.sh/react@18/umd/react.production.min.js';
    import ReactDOM from 'https://esm.sh/react-dom@18/umd/react-dom.production.min.js';
    import axios from 'https://esm.sh/axios';
    import { io } from 'https://esm.sh/socket.io-client';

    function App() {
      const [b, setB] = React.useState(50000);
      const [q, setQ] = React.useState({});
      const [s, setS] = React.useState({exchange:'virgocx',token:'USDC',amount:10000,direction:'sell'});
      const [status, setStatus] = React.useState('Ready');
      const [hash, setHash] = React.useState('');

      React.useEffect(() => {
        axios.get(API+'/quotes').then(r=>setQ(r.data.quotes));
        const socket = io(API);
        socket.on('tx-update', d=>{setStatus(`Confirmed – ${d.confirmations}/12`);setHash(d.hash);});
        return ()=>socket.close();
      }, []);

      const exec = async () => {
        setStatus('Processing...');
        try {
          const res = await axios.post(API+'/transaction', s);
          setB(res.data.newBalance);
          setStatus(`Success – Fee: $${res.data.fee}`);
          setHash(res.data.hash);
        } catch { setStatus('Failed'); }
      };

      return React.createElement('div', {className:"min-h-screen bg-gradient-to-br from-purple-900 via-black to-gray-900 p-8"}
        React.createElement('div', {className:"max-w-5xl mx-auto"}, 
          React.createElement('h1', {className:"text-5xl font-bold text-center mb-12 bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-400"}, "SPLAT – Institutional Middleware"),
          React.createElement('div', {className:"grid lg:grid-cols-2 gap-10"},
            React.createElement('div', {className:"bg-black/60 backdrop-blur border border-purple-500/30 p-10 rounded-3xl"},
              React.createElement('h2', {className:"text-3xl mb-8"}, "Execute Trade"),
              React.createElement('div', {className:"text-2xl mb-6"}, "Balance: ", React.createElement('span', {className:"text-green-400 font-bold"}, "$"+b.toLocaleString()+" CAD")),
              ['virgocx','newton','bitbuy'].map(ex=>React.createElement('button', {key:ex,className:`block w-full p-4 mb-3 rounded ${s.exchange===ex?'bg-purple-700':'bg-gray-800'}`,onClick:()=>setS({...s,exchange:ex})}, ex.toUpperCase())),
              ['USDC','USDT','BTC'].map(t=>React.createElement('button', {key:t,className:`block w-full p-4 mb-3 rounded ${s.token===t?'bg-purple-700':'bg-gray-800'}`,onClick:()=>setS({...s,token:t})}, t)),
              React.createElement('input', {type:"number",value:s.amount,onChange:e=>setS({...s,amount:+e.target.value}),className:"w-full p-4 bg-gray-900 rounded-xl text-xl mb-6"}),
              React.createElement('button', {onClick:exec,className:"w-full py-6 bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl text-2xl font-bold"}, "EXECUTE SELL"),
              React.createElement('div', {className:"mt-6 text-xl"}, "Status: ", status),
              hash && React.createElement('div', {className:"text-sm break-all mt-2"}, "Tx: ", hash)
            ),
            React.createElement('div', {className:"bg-black/60 backdrop-blur border border-purple-500/30 p-10 rounded-3xl"},
              React.createElement('h2', {className:"text-3xl mb-6"}, "Live Quotes"),
              Object.entries(q).map(([lp,rates])=>React.createElement('div', {key:lp,className:`p-6 rounded-xl mb-4 ${s.exchange===lp?'bg-purple-900/70':'bg-gray-900'}`},
                React.createElement('p', {className:"font-bold text-xl"}, lp.toUpperCase()),
                React.createElement('div', {className:"grid grid-cols-3 gap-4 mt-3"},
                  React.createElement('div', null, "USDC ", React.createElement('br'), React.createElement('span', {className:"text-2xl font-bold"}, rates.USDC)),
                  React.createElement('div', null, "USDT ", React.createElement('br'), React.createElement('span', {className:"text-2xl font-bold"}, rates.USDT)),
                  React.createElement('div', null, "BTC ", React.createElement('br'), React.createElement('span', {className:"text-2xl font-bold"}, rates.BTC?.toLocaleString()))
                )
              ))
            )
          )
        )
      );
    }

    const root = createRoot(document.getElementById('root'));
    root.render(React.createElement(App));
  </script>
</head>
<body class="bg-gradient-to-br from-purple-900 via-black to-gray-900 min-h-screen">
  <div id="root"></div>
</body>
</html>
